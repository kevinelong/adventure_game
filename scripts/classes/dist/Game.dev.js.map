{"version":3,"sources":["Game.js"],"names":["Game","lives","width","height","entities","map","Map","roomFromText","position","result","forEach","s","x","y","what","i","removed","direction","destination","Position","hero","Direction","UP","RIGHT","DOWN","LEFT","look","name","score","coins","remove","zombie_roll","Math","round","random","hero_roll"],"mappings":"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","sourcesContent":["class Game {\r\n  constructor() {\r\n    this.lives = 3;\r\n    this.width = 12;\r\n    this.height = 8;\r\n    this.entities = [];\r\n    this.map = new Map(this);\r\n    this.map.roomFromText(`\r\n    ############\r\n    #....Z.....#\r\n    #.@..#..$..#\r\n    #....#######\r\n    ######\r\n    `);\r\n    // this.map.room();\r\n  }\r\n\r\n  look(position) {\r\n    let result = null;\r\n    this.entities.forEach((s) => {\r\n      if (s.position.x === position.x && s.position.y === position.y) {\r\n        if (null == result) {\r\n          result = s;\r\n        }\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  remove(what) {\r\n    this.entities.forEach((s, i) => {\r\n      if (s === what) {\r\n        s.removed = true;\r\n        //this.entities.splice(i, 1); //DELETE 1 at the current index i\r\n      }\r\n    });\r\n  }\r\n\r\n  move(direction) {\r\n    let destination = new Position(this.hero.position.x, this.hero.position.y);\r\n\r\n    if (Direction.UP == direction) {\r\n      destination.y -= 1;\r\n    } else if (Direction.RIGHT == direction) {\r\n      destination.x += 1;\r\n    } else if (Direction.DOWN == direction) {\r\n      destination.y += 1;\r\n    } else if (Direction.LEFT == direction) {\r\n      destination.x -= 1;\r\n    }\r\n\r\n    let what = this.look(destination);\r\n\r\n    if (null === what || what.name === \"floor\" || what.removed) {\r\n      this.hero.position = destination;\r\n    } else if (\"treasure\" === what.name) {\r\n      this.hero.score += what.coins;\r\n      this.remove(what);\r\n    } else if (\"zombie\" === what.name) {\r\n      //FIGHT!\r\n      let zombie_roll = Math.round(Math.random() * 6);\r\n      let hero_roll = Math.round(Math.random() * 6);\r\n      if (hero_roll >= zombie_roll) {\r\n        this.hero.score += what.coins;\r\n        this.remove(what);\r\n      } else {\r\n        this.lives -= 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  status() {\r\n    return {\r\n      hero: this.hero,\r\n      entities: this.entities,\r\n      width: this.width,\r\n      height: this.height,\r\n    };\r\n  }\r\n}\r\n"],"file":"Game.dev.js"}