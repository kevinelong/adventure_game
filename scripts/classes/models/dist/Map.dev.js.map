{"version":3,"sources":["Map.js"],"names":["Map","game","r","c","height","width","p","Position","entities","push","isWall","Wall","Floor","text","aa","str2aa","ol","aa2objectList","forEach","item","position","x","y","symbol","hero","Hero","Zombie","Treasure"],"mappings":";;;;;;;;IAAMA,G;;;AACJ,eAAYC,IAAZ,EAAkB;AAAA;;AAChB,SAAKA,IAAL,GAAYA,IAAZ;AACD;;;;2BAEMC,C,EAAEC,C,EAAE;AACT,aAAOD,CAAC,KAAK,CAAN,IAAWA,CAAC,KAAK,KAAKD,IAAL,CAAUG,MAAV,GAAmB,CAApC,IAAyCD,CAAC,KAAK,CAA/C,IAAoDA,CAAC,KAAK,KAAKF,IAAL,CAAUI,KAAV,GAAkB,CAAnF;AACD;;;2BAEM;AACL,WAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKD,IAAL,CAAUG,MAA9B,EAAsCF,CAAC,EAAvC,EAA2C;AACzC,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKF,IAAL,CAAUI,KAA9B,EAAqCF,CAAC,EAAtC,EAA0C;AACxC,cAAIG,CAAC,GAAG,IAAIC,QAAJ,CAAaJ,CAAb,EAAgBD,CAAhB,CAAR;AACA,eAAKD,IAAL,CAAUO,QAAV,CAAmBC,IAAnB,CAAyB,KAAKC,MAAL,CAAYR,CAAZ,EAAcC,CAAd,IAAmB,IAAIQ,IAAJ,CAASL,CAAT,CAAnB,GAAiC,IAAIM,KAAJ,CAAUN,CAAV,CAA1D;AACD;AACF;AACF;;;iCACYO,I,EAAK;AAAA;;AAChB,UAAIC,EAAE,GAAGC,MAAM,CAACF,IAAD,CAAf;AACA,UAAIG,EAAE,GAAIC,aAAa,CAACH,EAAD,CAAvB;AACAE,MAAAA,EAAE,CAACE,OAAH,CAAW,UAAAC,IAAI,EAAE;AACf,YAAIb,CAAC,GAAG,IAAIC,QAAJ,CAAaY,IAAI,CAACC,QAAL,CAAcC,CAA3B,EAA8BF,IAAI,CAACC,QAAL,CAAcE,CAA5C,CAAR;;AACA,YAAG,QAAQH,IAAI,CAACI,MAAhB,EAAuB;AACrB,UAAA,KAAI,CAACtB,IAAL,CAAUO,QAAV,CAAmBC,IAAnB,CAAwB,IAAIG,KAAJ,CAAUN,CAAV,CAAxB;AACD,SAFD,MAEO,IAAG,QAAQa,IAAI,CAACI,MAAhB,EAAuB;AAC5B,UAAA,KAAI,CAACtB,IAAL,CAAUO,QAAV,CAAmBC,IAAnB,CAAwB,IAAIE,IAAJ,CAASL,CAAT,CAAxB;AACD,SAFM,MAEA,IAAG,QAAQa,IAAI,CAACI,MAAhB,EAAuB;AAC5B,UAAA,KAAI,CAACtB,IAAL,CAAUuB,IAAV,GAAiB,IAAIC,IAAJ,CAASnB,CAAT,CAAjB;;AACA,UAAA,KAAI,CAACL,IAAL,CAAUO,QAAV,CAAmBC,IAAnB,CAAwB,KAAI,CAACR,IAAL,CAAUuB,IAAlC;;AACA,UAAA,KAAI,CAACvB,IAAL,CAAUO,QAAV,CAAmBC,IAAnB,CAAwB,IAAIG,KAAJ,CAAUN,CAAV,CAAxB;AACD,SAJM,MAIA,IAAG,QAAQa,IAAI,CAACI,MAAhB,EAAuB;AAC5B,UAAA,KAAI,CAACtB,IAAL,CAAUO,QAAV,CAAmBC,IAAnB,CAAwB,IAAIiB,MAAJ,CAAWpB,CAAX,CAAxB;;AACA,UAAA,KAAI,CAACL,IAAL,CAAUO,QAAV,CAAmBC,IAAnB,CAAwB,IAAIG,KAAJ,CAAUN,CAAV,CAAxB;AACD,SAHM,MAGA,IAAG,QAAQa,IAAI,CAACI,MAAhB,EAAuB;AAC5B,UAAA,KAAI,CAACtB,IAAL,CAAUO,QAAV,CAAmBC,IAAnB,CAAwB,IAAIkB,QAAJ,CAAarB,CAAb,EAAgB,GAAhB,CAAxB;;AACA,UAAA,KAAI,CAACL,IAAL,CAAUO,QAAV,CAAmBC,IAAnB,CAAwB,IAAIG,KAAJ,CAAUN,CAAV,CAAxB;AACD;AAEF,OAlBD;AAmBD","sourcesContent":["class Map {\r\n  constructor(game) {\r\n    this.game = game;\r\n  }\r\n\r\n  isWall(r,c){\r\n    return r === 0 || r === this.game.height - 1 || c === 0 || c === this.game.width - 1;\r\n  }\r\n\r\n  room() {\r\n    for (let r = 0; r < this.game.height; r++) {\r\n      for (let c = 0; c < this.game.width; c++) {\r\n        let p = new Position(c, r);\r\n        this.game.entities.push( this.isWall(r,c) ? new Wall(p) : new Floor(p));\r\n      }\r\n    }\r\n  }\r\n  roomFromText(text){\r\n    let aa = str2aa(text);\r\n    let ol =  aa2objectList(aa);\r\n    ol.forEach(item=>{\r\n      let p = new Position(item.position.x, item.position.y);\r\n      if(\".\" === item.symbol){\r\n        this.game.entities.push(new Floor(p));\r\n      } else if(\"#\" === item.symbol){\r\n        this.game.entities.push(new Wall(p));\r\n      } else if(\"@\" === item.symbol){\r\n        this.game.hero = new Hero(p);\r\n        this.game.entities.push(this.game.hero);\r\n        this.game.entities.push(new Floor(p));\r\n      } else if(\"Z\" === item.symbol){\r\n        this.game.entities.push(new Zombie(p));\r\n        this.game.entities.push(new Floor(p));\r\n      } else if(\"$\" === item.symbol){\r\n        this.game.entities.push(new Treasure(p, 300));\r\n        this.game.entities.push(new Floor(p));\r\n      }\r\n\r\n    });\r\n  }\r\n}\r\n"],"file":"Map.dev.js"}