{"version":3,"sources":["DOMView.js"],"names":["DOMView","game","document","body","innerHTML","world","score","stats","arrowPad","map","split","forEach","cls","window","querySelector","addEventListener","event","console","log","keyCode","CODES","move","render","entities","sprite","i","div","undefined","element","createElement","src","name","symbol","style","zIndex","appendChild","removed","classList","add","left","position","x","top","y","hero","output","life","lives"],"mappings":";;;;;;;;IAAMA,O;;;AACJ,mBAAYC,IAAZ,EAAkB;AAAA;;AAAA;;AAChB,SAAKA,IAAL,GAAYA,IAAZ;AACAC,IAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,GAA0BC,KAAK,CAACC,KAAK,KAAKC,KAAK,EAAf,GAAoBC,QAAQ,EAA5B,GAAiCC,GAAG,EAArC,CAA/B;AAEA,yCAAqCC,KAArC,CAA2C,GAA3C,EAAgDC,OAAhD,CAAwD,UAACC,GAAD,EAAS;AAC/DC,MAAAA,MAAM,CAACD,GAAD,CAAN,GAAcV,QAAQ,CAACY,aAAT,YAA2BF,GAA3B,EAAd;AACD,KAFD;AAIAV,IAAAA,QAAQ,CAACa,gBAAT,CAA0B,SAA1B,EAAqC,UAACC,KAAD,EAAW;AAC9CC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;AACA,UAAIC,KAAK,GAAG;AACV,YAAI,MADM;AAEV,YAAI,IAFM;AAGV,YAAI,OAHM;AAIV,YAAI,MAJM;AAKV,YAAI,MALM;AAKE;AACZ,YAAI,IANM;AAMA;AACV,YAAI,MAPM;AAOE;AACZ,YAAI,OARM,CAQG;;AARH,OAAZ;;AAUA,MAAA,KAAI,CAACnB,IAAL,CAAUoB,IAAV,CAAeD,KAAK,CAACJ,KAAK,CAACG,OAAP,CAApB;;AACA,MAAA,KAAI,CAACG,MAAL;AACD,KAdD;AAeD;;;;6BAEQ;AACP;AACA;AACA,WAAKrB,IAAL,CAAUsB,QAAV,CAAmBZ,OAAnB,CAA2B,UAACa,MAAD,EAASC,CAAT,EAAe;AACxC,YAAIC,GAAJ;;AACA,YAAIC,SAAS,KAAKH,MAAM,CAACI,OAAzB,EAAkC;AAChCF,UAAAA,GAAG,GAAGxB,QAAQ,CAAC2B,aAAT,CAAuB,KAAvB,CAAN;AACAH,UAAAA,GAAG,CAACI,GAAJ,GAAU,YAAYN,MAAM,CAACO,IAAnB,GAA0B,MAApC,CAFgC,CAGhC;;AAEA,cAAGP,MAAM,CAACQ,MAAP,KAAgB,GAAnB,EAAuB;AACrBN,YAAAA,GAAG,CAACO,KAAJ,CAAUC,MAAV,GAAmB,GAAnB;AACD,WAFD,MAEK;AACHR,YAAAA,GAAG,CAACO,KAAJ,CAAUC,MAAV,GAAmB,GAAnB;AACD;;AAEDV,UAAAA,MAAM,CAACI,OAAP,GAAiBF,GAAjB;AACAb,UAAAA,MAAM,CAACJ,GAAP,CAAW0B,WAAX,CAAuBT,GAAvB,EAZgC,CAYH;AAC9B,SAbD,MAaO;AACLA,UAAAA,GAAG,GAAGF,MAAM,CAACI,OAAb;AACD;;AACD,YAAIJ,MAAM,CAACY,OAAX,EAAoB;AAClBV,UAAAA,GAAG,CAACW,SAAJ,CAAcC,GAAd,CAAkB,SAAlB;AACD;;AACDZ,QAAAA,GAAG,CAACO,KAAJ,CAAUM,IAAV,GAAiBf,MAAM,CAACgB,QAAP,CAAgBC,CAAhB,GAAoB,KAArC;AACAf,QAAAA,GAAG,CAACO,KAAJ,CAAUS,GAAV,GAAgBlB,MAAM,CAACgB,QAAP,CAAgBG,CAAhB,GAAoB,KAApC;AACD,OAvBD;AAwBA9B,MAAAA,MAAM,CAACP,KAAP,CAAaF,SAAb,GAAyB,KAAKH,IAAL,CAAU2C,IAAV,CAAetC,KAAxC;AAEA,UAAIuC,MAAM,GAAG,EAAb;;AACA,WAAK,IAAIC,IAAI,GAAG,CAAhB,EAAmBA,IAAI,GAAG,KAAK7C,IAAL,CAAU8C,KAApC,EAA2CD,IAAI,EAA/C,EAAmD;AACjDD,QAAAA,MAAM,IAAI,IAAV;AACD;;AACDhC,MAAAA,MAAM,CAACN,KAAP,CAAaH,SAAb,GAAyByC,MAAzB;AACD","sourcesContent":["class DOMView {\r\n  constructor(game) {\r\n    this.game = game;\r\n    document.body.innerHTML = world(score() + stats() + arrowPad() + map());\r\n\r\n    \"map score stats up down left right\".split(\" \").forEach((cls) => {\r\n      window[cls] = document.querySelector(`.${cls}`);\r\n    });\r\n\r\n    document.addEventListener(\"keydown\", (event) => {\r\n      console.log(event.keyCode);\r\n      let CODES = {\r\n        37: \"left\",\r\n        38: \"up\",\r\n        39: \"right\",\r\n        40: \"down\",\r\n        65: \"left\", //a\r\n        87: \"up\", //w\r\n        83: \"down\", //s\r\n        68: \"right\", //d\r\n      };\r\n      this.game.move(CODES[event.keyCode]);\r\n      this.render();\r\n    });\r\n  }\r\n  \r\n  render() {\r\n    //DRAW\r\n    //window.map.innerHTML = \"\"; //clear the map\r\n    this.game.entities.forEach((sprite, i) => {\r\n      let div;\r\n      if (undefined === sprite.element) {\r\n        div = document.createElement(\"img\");\r\n        div.src = \"images/\" + sprite.name + \".png\";\r\n        //div.setAttribute(\"style\", 'width:1rem;height:1rem;object-fit:contain;');\r\n\r\n        if(sprite.symbol===\".\"){\r\n          div.style.zIndex = 100;\r\n        }else{\r\n          div.style.zIndex = 200;  \r\n        }\r\n        \r\n        sprite.element = div;\r\n        window.map.appendChild(div); //append to map\r\n      } else {\r\n        div = sprite.element;\r\n      }\r\n      if (sprite.removed) {\r\n        div.classList.add(\"removed\");\r\n      }\r\n      div.style.left = sprite.position.x + \"rem\";\r\n      div.style.top = sprite.position.y + \"rem\";\r\n    });\r\n    window.score.innerHTML = this.game.hero.score;\r\n\r\n    let output = \"\";\r\n    for (let life = 0; life < this.game.lives; life++) {\r\n      output += \"@ \";\r\n    }\r\n    window.stats.innerHTML = output;\r\n  }\r\n}\r\n"],"file":"DOMView.dev.js"}